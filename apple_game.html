<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>사과게임</title>
  <style>
    body {margin:0; background:#cceeff;}
    canvas {display:block; margin:auto;}
  </style>
</head>
<body>
<canvas id="gameCanvas" width="400" height="600"></canvas>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

// 게임 변수
let basketX = 170;
let basketY = 550;
const basketWidth = 60;
const basketHeight = 20;

let apples = [{x: Math.random()*340, y: 0}];
let score = 0;

// 키보드 조작
window.addEventListener('keydown', (e) => {
  if(e.key==='ArrowLeft') basketX -= 20;
  else if(e.key==='ArrowRight') basketX += 20;
  basketX = Math.max(0, Math.min(340, basketX));
});

// 게임 반복
function gameLoop() {
  ctx.clearRect(0,0,400,600);

  // 바구니 그리기
  ctx.fillStyle = 'brown';
  ctx.fillRect(basketX, basketY, basketWidth, basketHeight);

  // 사과 그리기, 이동
  for(let i=0; i<apples.length; i++) {
    ctx.beginPath();
    ctx.arc(apples[i].x+15, apples[i].y+15, 15, 0, Math.PI*2);
    ctx.fillStyle = 'red';
    ctx.fill();
    apples[i].y += 4;

    // 바구니로 잡기
    if(apples[i].y+30 >= basketY && 
       apples[i].x > basketX-30 && apples[i].x < basketX+basketWidth) {
      score++;
      apples[i] = {x: Math.random()*340, y: 0};
    }
    // 바닥에 떨어진 경우
    else if(apples[i].y+30 > 600) {
      apples[i] = {x: Math.random()*340, y: 0};
    }
  }

  // 점수 표시
  ctx.fillStyle = 'black';
  ctx.font = '24px Arial';
  ctx.fillText('Score: '+score, 10, 40);

  requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>
